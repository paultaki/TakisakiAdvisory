/* 
 * Steve-Inspired Touch Experience
 * Perfect touch targets with delightful feedback
 */

:root {
  /* Touch variables */
  --touch-primary: 44px;       /* Minimum touch target size */
  --touch-padding: 16px;       /* Default padding for touch elements */
  --touch-ripple: #00e5ff20;   /* Ripple effect color with transparency */
  
  /* Animation curves */
  --touch-press: cubic-bezier(0.5, 0, 0.1, 1);
  --touch-release: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --touch-fast: 180ms;
  --touch-normal: 280ms;
}

/* ===== Universal Touch Target Enhancement ===== */

/* All interactive elements get a minimum touch size */
.touch-optimized a,
.touch-optimized button,
.touch-optimized input[type="button"],
.touch-optimized input[type="submit"],
.touch-optimized [role="button"],
.touch-optimized .interactive {
  min-height: var(--touch-primary);
  min-width: var(--touch-primary);
  position: relative;
  /* Remove tap highlight on mobile */
  -webkit-tap-highlight-color: transparent;
  /* Improve touch feeling */
  touch-action: manipulation;
}

/* Focus states */
.touch-optimized a:focus-visible,
.touch-optimized button:focus-visible,
.touch-optimized input:focus-visible,
.touch-optimized [role="button"]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px #00e5ff;
}

/* ===== Touch Feedback Effects ===== */

/* Tactile press feedback */
.tactile {
  position: relative;
  transform-style: preserve-3d;
  transition: transform var(--touch-fast) var(--touch-press),
              box-shadow var(--touch-fast) var(--touch-press);
}

.tactile:active {
  transform: scale(0.97) translateY(1px);
}

/* Ripple effect container */
.ripple {
  position: relative;
  overflow: hidden;
  transform: translate3d(0, 0, 0);
}

/* Ripple element */
.ripple-effect {
  position: absolute;
  border-radius: 50%;
  background-color: var(--touch-ripple);
  transform: scale(0);
  opacity: 0.7;
  animation: ripple-animation var(--touch-normal) ease-out forwards;
  pointer-events: none;
  z-index: 1;
}

@keyframes ripple-animation {
  0% {
    transform: scale(0);
    opacity: 0.7;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

/* Subtle highlight on touch */
.subtle-touch {
  transition: background-color var(--touch-fast) var(--touch-press);
}

.subtle-touch:active {
  background-color: rgba(255, 255, 255, 0.05);
}

/* Card press effect */
.card-press {
  transition: transform var(--touch-fast) var(--touch-press),
              box-shadow var(--touch-fast) var(--touch-press);
}

.card-press:active {
  transform: scale(0.98);
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
}

/* ===== Microinteractions ===== */

/* Button with spring-back effect */
.spring-button {
  transition: transform var(--touch-fast) var(--touch-press);
}

.spring-button:active {
  transform: scale(0.95);
  transition-duration: 120ms;
}

.spring-button.released {
  transform: scale(1);
  transition-timing-function: var(--touch-release);
  transition-duration: 350ms;
}

/* Magnetic pull effect (applied via JS) */
.magnetic-effect {
  transition: transform var(--touch-normal) var(--touch-release);
}

/* Expanding target - increases hit area without visual change */
.expanding-target {
  position: relative;
}

.expanding-target::before {
  content: '';
  position: absolute;
  top: -8px;
  right: -8px;
  bottom: -8px;
  left: -8px;
  z-index: -1;
}

/* Custom select field enhancement */
.touch-select {
  position: relative;
  width: 100%;
}

.touch-select select {
  appearance: none;
  -webkit-appearance: none;
  width: 100%;
  padding: 12px 16px;
  padding-right: 40px;
  border-radius: 8px;
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #fff;
  font-size: 16px;
  cursor: pointer;
}

.touch-select::after {
  content: 'â–¼';
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: rgba(255, 255, 255, 0.5);
  font-size: 14px;
  pointer-events: none;
  transition: transform var(--touch-fast) var(--touch-press);
}

.touch-select select:focus + ::after {
  transform: translateY(-50%) rotate(180deg);
}

/* ===== Form Elements Optimization ===== */

/* Touch-optimized input fields */
.touch-input {
  display: block;
  width: 100%;
  padding: 16px;
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #fff;
  font-size: 16px;
  transition: border-color var(--touch-fast) var(--touch-press),
              box-shadow var(--touch-fast) var(--touch-press);
}

.touch-input:focus {
  border-color: #00e5ff;
  box-shadow: 0 0 0 2px #00e5ff20;
  outline: none;
}

/* Switch toggle */
.touch-switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.touch-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.touch-switch-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.1);
  transition: .3s;
  border-radius: 34px;
}

.touch-switch-slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .3s;
  border-radius: 50%;
}

.touch-switch input:checked + .touch-switch-slider {
  background-color: #00e5ff;
}

.touch-switch input:checked + .touch-switch-slider:before {
  transform: translateX(26px);
}

/* Expandable hit area for radio buttons and checkboxes */
.touch-radio,
.touch-checkbox {
  position: relative;
  padding-left: 44px;
  margin-bottom: 16px;
  cursor: pointer;
  user-select: none;
  min-height: 44px;
  display: flex;
  align-items: center;
}

.touch-radio input,
.touch-checkbox input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.touch-radio-mark,
.touch-checkbox-mark {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  height: 24px;
  width: 24px;
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all var(--touch-fast) var(--touch-press);
}

.touch-radio-mark {
  border-radius: 50%;
}

.touch-checkbox-mark {
  border-radius: 4px;
}

.touch-radio:hover input ~ .touch-radio-mark,
.touch-checkbox:hover input ~ .touch-checkbox-mark {
  background-color: rgba(255, 255, 255, 0.1);
}

.touch-radio input:checked ~ .touch-radio-mark,
.touch-checkbox input:checked ~ .touch-checkbox-mark {
  background-color: #00e5ff;
  border-color: #00e5ff;
}

.touch-radio-mark:after,
.touch-checkbox-mark:after {
  content: "";
  position: absolute;
  display: none;
}

.touch-radio input:checked ~ .touch-radio-mark:after,
.touch-checkbox input:checked ~ .touch-checkbox-mark:after {
  display: block;
}

.touch-radio .touch-radio-mark:after {
  top: 7px;
  left: 7px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #000;
}

.touch-checkbox .touch-checkbox-mark:after {
  left: 8px;
  top: 4px;
  width: 6px;
  height: 10px;
  border: solid #000;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* ===== Media Specific Optimizations ===== */

/* iPhone notch/dynamic island support */
@supports (padding-top: env(safe-area-inset-top)) {
  .touch-fixed-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .touch-fixed-top {
    padding-top: env(safe-area-inset-top);
  }
}